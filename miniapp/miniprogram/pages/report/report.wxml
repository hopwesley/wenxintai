<view class="page">
  <view class="title">测评报告</view>
  <view wx:if="{{loading}}" class="status">报告准备中...</view>
  <view wx:if="{{report}}" class="report-card">
    <view class="report-title">{{report.title || '测评报告'}}</view>
    <view class="report-body">
      <text>维度：{{(report.dimensions || []).join('、')}}</text>
      <text wx:if="{{report.recommendation}}">推荐：{{report.recommendation}}</text>
    </view>
  </view>

  <view class="card">
    <view class="section-title">支付/邀请码</view>
    <view class="field">
      <input placeholder="输入邀请码（如有）" value="{{inviteCode}}" bindinput="onInviteInput" />
      <button size="mini" bindtap="useInvite">使用邀请码</button>
    </view>
    <button type="primary" loading="{{awaitingPay}}" bindtap="preparePay">支付并生成</button>
  </view>

  <view class="log-panel">
    <view class="log-title">生成日志</view>
    <scroll-view scroll-y class="log-body">
      <block wx:for="{{logs}}" wx:key="index">
        <view class="log-line">{{item}}</view>
      </block>
    </scroll-view>
  </view>
</view>
